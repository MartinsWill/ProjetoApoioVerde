<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--CSS-->
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/custom.css">
    <link rel="stylesheet" href="../css/global.css">
    <!--Font-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css">

    <title>ApoioVerde</title>
</head>

<body ondragstart="return false">
    <!--header-->
    <div id="header">
        <div class="container-fluid">
            <nav class="navbar navbar-expand-lg navbar-light">
                <a class="navbar-brand" href="inicial.html">
                    <img src="../img/logo-img.png" width="50" height="50" class="d-inline-block align-center "> ApoioVerde
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <ul class="navbar-nav navbar-right">
                        <li class="nav-item">
                            <a class="nav-link" href="inicial.html">Página Inicial</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="projetos.html">Projetos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#contato">Contato</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="login.html">Login | Cadastrar</a>
                        </li>
                    </ul>
                </div>
        </div>
    </div>
    </nav>
    </div>
    <!--header-->
    <!--view-->
    <div id="view">
        <div class="container block">
            <div class="row pt-5">
                <div class=" col-md-8 mb-md-0 mb-4">
                    <span id="imagem"></span>
                    <!-- <img src="img/laranja-img" class="img-fluid" alt=""> -->
                </div>
                <div id="card-view" class="col-md-4 align-self-center mb-md-0">
                    <h2 id="nomeProjeto">Nome do produto</h2>
                    <p id="nomeProdutor">Nome do produtor</p>
                    <p id="valorArrecado">R$ 1.000 arrecadado</p>
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated bg-success"
                            role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"
                            style="width: 20%"></div>
                    </div>
                    <p id="valorMeta">Meta R$5000,00</p>
                    <button type="button" class="btn button-primary-outline button2">Apoiar projeto
                    </button>
                </div>
            </div>
            <div id="border"></div>
            <h2 id="text-info" class="infot-text">O que você vai apoiar?</h2>
            <p class="info-text">
                Você está adotando uma árvore jovem que ainda não está produzindo uma quantidade suficiente de frutos.
                Enquanto essas árvores crescem, sua colheita virá de seus irmãos mais velhos.

                Uma laranja da nossa fazenda produz em média 20 kg por temporada. Você não precisa se comprometer com o
                consumo de toda a colheita. A cada temporada, você pode decidir que quantidade reservar e pagar a
                manutenção de acordo com o valor que reservar. Dessa forma, você só pagará pelo que consumir e podemos
                planejar e vender o valor restante da colheita de sua árvore para outras pessoas.

                A vida produtiva de uma laranja é de cerca de 20 anos. Enquanto você quiser mantê-lo e nós continuarmos
                cuidando dele, você pode renovar sua adoção ano após ano. Se sua árvore de laranja morrer, iremos
                substituí-la sem custo adicional e garantindo a entrega de sua colheita de outras árvores.</p>

            <h2 class="infot-text">O que você irá receber?</h2>
            <p class="info-text">Durante a época de colheita, você pode receber progressivamente a quantidade de
                colheita de laranjas que
                você reserva no momento da adoção.
                Formato de envio: 5kg de laranja.
                A laranja é doce, firme e crocante com uma cor laranja intensa.
                Os frutos são achatados e semelhantes em tamanho a uma maçã. br
                A melhor maneira de guardar a laranja é na geladeira, pois você pode saboreá-lo por mais tempo. Mantenha
                as frutas em local fresco, seco e longe da luz.</p>

            <h2 class="infot-text">Quando irei receber o produto?</h2>
            <p class="info-text">Esta variedade é colhida em seu tempo ideal de maturação entre meados de setembro e
                meados de outubro, aproximadamente.</p>
        </div>
        <!--contato-->
        <footer id="contato" class="contato  ">
            <div class="social-icons">
                <a href=""><i class="fab fa-facebook-f"></i></a>
                <a href=""><i class="fab fa-instagram"></i></a>
                <a href=""><i class="fab fa-twitter-square"></i></a>
                <a href=""><i class="fab fa-linkedin-in"></i></a>
            </div>
            <p>Copyright © ApoioVerde 2021. Todos os direitos reservados.</p>
        </footer>

        <!--contato-->
    </div>
    <!--view-->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>
    
    
    $( document ).ready(function() {
        var parametro = location.search.substring(1)
        console.log(parametro)
        
        sql = `SELECT PJ.NOME, PD.NOME AS NOME_PRODUTOR, PJ.IMAGEM, PJ.META_FINAL FROM DB_APOIOVERDE.TB_PROJETO AS PJ
                INNER JOIN DB_APOIOVERDE.TB_USUARIO AS PD
                ON PJ.ID_PRODUTOR = PD.ID
                WHERE PJ.ID = '${parametro}'`
    
        jQuery.ajax({
            type: "POST",
            url: '../backend/crud.class.php',
            dataType: 'json',
            data: {functionname: 'execute_query', arguments: sql},
    
            success: function (data, textstatus) {
                          if( !('error' in data) ) {
                              resultado = JSON.parse(data.result);
    
                            console.log(resultado)
                              resultado.forEach(element => {
                                  imagens = JSON.parse(element.IMAGEM)
                                  
                                //$('#imagem').append(`<img src="https://i.imgur.com/${imagens[0]}.jpg" class="img-fluid" alt="">`)
                                  $('#imagem').append(`<div style="background-image: url('https://i.imgur.com/${imagens[0]}.jpg'); background-position: center; background-size: cover; width:735px; height:600px; border-radius:5px" class="img-fluid"> </div>`)
                                  $('#nomeProjeto').html(element.NOME)
                                  $('#nomeProdutor').html(element.NOME_PRODUTOR)

                                  $('#valorMeta').html(`Meta R$${element.META_FINAL}`)
                                    

                              });
    
    
                          }
                          else {
                              console.log(data.error);
                          }
                    }
        })
        
    });
    
    </script>

</body>

</html>